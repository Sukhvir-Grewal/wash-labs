{
    "sourceFile": "pages/api/auth/logout.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1761927994957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1761927994957,
            "name": "Commit-0",
            "content": "import { getSessionToken, deleteSession, createLogoutCookie } from '../../../lib/auth';\r\n\r\n/**\r\n * Admin Logout API\r\n * POST /api/auth/logout\r\n * \r\n * Clears session and removes cookie\r\n */\r\nexport default async function handler(req, res) {\r\n  // Only allow POST\r\n  if (req.method !== 'POST') {\r\n    return res.status(405).json({ error: 'Method not allowed' });\r\n  }\r\n  \r\n  try {\r\n    // Get session token\r\n    const token = getSessionToken(req);\r\n    \r\n    // Delete session if exists\r\n    if (token) {\r\n      deleteSession(token);\r\n    }\r\n    \r\n    // Clear cookie\r\n    const cookie = createLogoutCookie();\r\n    res.setHeader('Set-Cookie', cookie);\r\n    \r\n    return res.status(200).json({ \r\n      success: true,\r\n      message: 'Logout successful'\r\n    });\r\n    \r\n  } catch (error) {\r\n    console.error('[auth/logout] error:', error);\r\n    return res.status(500).json({ error: 'Internal server error' });\r\n  }\r\n}\r\n"
        }
    ]
}